# GTasks-RemindersSync

[![GitHub release (latest by date)](https://img.shields.io/github/v/release/VatsalSy/gTasks-RemindersSync)](https://github.com/VatsalSy/gTasks-RemindersSync/releases/latest)
[![License](https://img.shields.io/github/license/VatsalSy/gTasks-RemindersSync)](https://github.com/VatsalSy/gTasks-RemindersSync/blob/main/LICENSE)
[![Swift](https://img.shields.io/badge/Swift-5.5%2B-orange)](https://swift.org)
[![Platform](https://img.shields.io/badge/platform-macOS-lightgrey)]()
[![Open Issues](https://img.shields.io/github/issues/VatsalSy/gTasks-RemindersSync)](https://github.com/VatsalSy/gTasks-RemindersSync/issues)

[![Report Bug](https://img.shields.io/badge/Report%20Bug-red?style=for-the-badge&logo=github)](https://github.com/VatsalSy/gTasks-RemindersSync/issues/new?assignees=&labels=bug&projects=&template=bug_report.yml)
[![Request Feature](https://img.shields.io/badge/Request%20Feature-blue?style=for-the-badge&logo=github)](https://github.com/VatsalSy/gTasks-RemindersSync/issues/new?assignees=&labels=enhancement&projects=&template=feature_request.yml)
[![Open Issue](https://img.shields.io/badge/Open%20Issue-green?style=for-the-badge&logo=github)](https://github.com/VatsalSy/gTasks-RemindersSync/issues/new?assignees=&labels=&projects=&template=general.yml)

A Swift command-line tool that provides synchronization between Google Tasks and Apple Reminders. This tool helps you keep your tasks in sync across both platforms, with special handling for completion status.

## Features

- Bidirectional sync of task completion status:
  - When a task is marked complete in either system, it will be marked complete in both
  - Completion status is synced immediately during each sync run
- One-way sync of new tasks from Google Tasks to Apple Reminders:
  - Any task that exists in Google Tasks but not in Apple Reminders will be created in Apple Reminders
  - All properties (title, due date, notes) are preserved
- One-way sync of new tasks from Apple Reminders to Google Tasks:
  - After syncing from Google Tasks, any task that exists only in Apple Reminders will be created in Google Tasks
  - All properties (title, due date, notes) are preserved
- Detailed logging for troubleshooting
- Uses a dedicated "GTasks" list in Apple Reminders

## Prerequisites

- macOS 13 or later (required for Apple Reminders access)
- Xcode and Swift development tools
- A Google Cloud Project with the Tasks API enabled
- OAuth 2.0 credentials from Google Cloud Console

## Setup

1. **Create a Google Cloud Project**
   - Go to the [Google Cloud Console](https://console.cloud.google.com)
   - Create a new project or select an existing one
   - Enable the Tasks API
   - Create OAuth 2.0 credentials:
     - Application type: Desktop Application
     - Download the client ID and client secret

2. **Set Environment Variables**
   Create a `.envlocal` file in the project root with the following variables:
   ```
   GOOGLE_CLIENT_ID=your_client_id
   GOOGLE_CLIENT_SECRET=your_client_secret
   GOOGLE_TOKEN=your_token # Do not enter. This will be generated by the application
   ```

3. **Build the Project**
   ```bash
   swift build
   ```

4. **Run the Application**
   ```bash
   swift run gTasks-RemindersSync
   ```

   On first run:
   - The application will prompt you to authorize access to your Google Tasks
   - Follow the URL provided in the console
   - After authorization, copy the code and paste it back into the console
   - The application will store the token for future use
   - You'll need to grant access to Apple Reminders when prompted

## Sync Process

The sync process runs in three steps:

1. **Completion Status Sync**
   - For tasks that exist in both systems
   - If a task is marked complete in either system, it will be marked complete in both

2. **Google Tasks to Apple Reminders Sync**
   - Creates Apple Reminders for any tasks that exist in Google Tasks but not in Reminders
   - Preserves all task properties (title, due date, notes, completion status)

3. **Apple Reminders to Google Tasks Sync**
   - Creates Google Tasks for any reminders that exist in Apple Reminders but not in Google Tasks
   - Preserves all task properties (title, due date, notes, completion status)

## Usage

Simply run the application whenever you want to sync your tasks:

```bash
swift run gTasks-RemindersSync
```

The application will:
1. Connect to both Google Tasks and Apple Reminders
2. Create a "GTasks" list in Apple Reminders if it doesn't exist
3. Perform the three-step sync process
4. Show detailed logs of what's being synced

## Notes

- The sync uses task titles to match tasks between systems
- Tasks are never deleted from either system
- The first sync will create Apple Reminders for all your Google Tasks
- Subsequent syncs will maintain completion status and create new tasks as needed
- Due dates and notes are preserved when syncing in either direction

## Architecture

The application consists of three main services:

1. **GoogleTasksService**
   - Handles authentication with Google Tasks API
   - Manages task list operations
   - Converts between Google Tasks and internal Task model

2. **RemindersService**
   - Manages Apple Reminders integration
   - Handles reminder list creation and management
   - Converts between Reminders and internal Task model

3. **SyncManager**
   - Orchestrates synchronization between services
   - Handles conflict resolution
   - Manages the sync process

## Troubleshooting

If you encounter issues:

1. **Authorization Issues**
   - Delete the stored Google token and reauthorize
   - Check your OAuth credentials in Google Cloud Console
   - Ensure the Tasks API is enabled

2. **Sync Issues**
   - Check the console logs for detailed information
   - Verify Apple Reminders permissions
   - Ensure the "GTasks" list exists in Apple Reminders

3. **Due Date Issues**
   - Ensure your system timezone matches Google Tasks
   - Check the logs for date parsing information

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## License

This project is licensed under the MIT License - see the LICENSE file for details.
